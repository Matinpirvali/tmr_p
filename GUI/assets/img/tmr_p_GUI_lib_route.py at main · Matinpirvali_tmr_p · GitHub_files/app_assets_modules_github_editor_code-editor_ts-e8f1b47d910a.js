"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_assets_modules_github_editor_code-editor_ts"],{81574:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(4412),o=n(68202);let r=[],l=0;function a(e){!async function(){r.push(e),await i.x,s()}()}function s(){let e=l;l=r.length,c(r.slice(e),null,window.location.href)}function c(e,t,n){let i=window.location.hash.slice(1),o=i?document.getElementById(i):null,r={oldURL:t,newURL:n,target:o};for(let t of e)t.call(null,r)}a.clear=()=>{r.length=l=0};let d=window.location.href;window.addEventListener("popstate",function(){d=window.location.href}),window.addEventListener("hashchange",function(e){let t=window.location.href;try{c(r,e.oldURL||d,t)}finally{d=t}});let u=null;document.addEventListener(o.QE.START,function(){u=window.location.href}),document.addEventListener(o.QE.SUCCESS,function(){c(r,u,window.location.href)})},94313:(e,t,n)=>{n.d(t,{Ty:()=>o,YE:()=>r,Zf:()=>l});var i=n(11793);let o=()=>{let e=document.querySelector("meta[name=keyboard-shortcuts-preference]");return!e||"all"===e.content},r=e=>/Enter|Arrow|Escape|Meta|Control|Esc/.test(e)||e.includes("Alt")&&e.includes("Shift"),l=e=>{let t=(0,i.EL)(e);return!!o()||r(t)}},82936:(e,t,n)=>{n.d(t,{Z:()=>L});var i=n(14504),o=n(52539),r=n(40790),l=n(14146),a=n(87093),s=n(55292),c=n(81699),d=n(32095),u=n(14568),h=n(23350),f=n(74102),m=n(4631),p=n.n(m);let g=document.querySelector("link[rel=assets]"),b=g instanceof HTMLLinkElement&&g.href||"/",w=`${b}static/javascripts/codemirror%CONTRIB/mode/%N/%N.js?v=1`,E={};function v(e,t){let n=t;return()=>{0==--n&&e()}}function y(e,t){let n=p().modes[e].dependencies;if(!n)return t();let i=[];for(let e=0;e<n.length;++e)p().modes.hasOwnProperty(n[e])||i.push(n[e]);if(!i.length)return t();let o=v(t,i.length);for(let e=0;e<i.length;++e)p().requireMode(i[e],o)}function T(e,t){if(p().modes.hasOwnProperty(e))return y(e,t);if(E.hasOwnProperty(e))return E[e].push(t);let n=p().findModeByName(e),i=n&&n.contrib?"/contrib":"",o=w.replace(/%CONTRIB/,i).replace(/%N/g,e);window.CodeMirror=p();let r=document.createElement("script");r.src=o,r.crossOrigin="anonymous";let l=document.querySelector("meta[name=codemirror-crossorigin-credentials]");l&&(r.crossOrigin="use-credentials");let a=document.getElementsByTagName("script")[0],s=E[e]=[t];if(p().on(r,"load",()=>{y(e,()=>{for(let e=0;e<s.length;++e)s[e]()})}),null==a.parentNode)throw Error("first script node must be in the document.");a.parentNode.insertBefore(r,a)}function M(e,t){p().modes.hasOwnProperty(t)||p().requireMode(t,()=>{e.setOption("mode",e.getOption("mode"))})}p().autoLoadMode=M,p().requireMode=T,p().defineMode("conflict",(e,t)=>{let n={startState:()=>({insideConflict:!1}),token:(e,t)=>{if(e.sol()){if(e.match(/^<<<<<<</))return t.insideConflict=!0,e.skipToEnd(),"conflict-marker line-background-conflict-background";if(t.insideConflict&&e.match(/^=======/))return e.skipToEnd(),"conflict-marker line-background-conflict-background";if(t.insideConflict&&e.match(/^>>>>>>>/))return t.insideConflict=!1,e.skipToEnd(),"conflict-marker line-background-conflict-background"}return t.insideConflict?(e.next(),"line-background-conflict-background"):(e.next(),null)},blankLine:e=>e.insideConflict?"line-background-conflict-background":null};if(t.baseMode){let i=p().getMode(e,t.baseMode);if("null"!==i.name)return p().overlayMode(i,n,!0);let o=p().findModeByMIME(t.baseMode);p().autoLoadMode(t.editor,o.mode)}return n}),p().defineMIME("application/x-conflict","conflict");let L=p()},56599:(e,t,n)=>{n.d(t,{o:()=>c});var i=n(71707),o=n.n(i),r=n(4631),l=n.n(r),a=n(15205);let s=(0,a.Z)(async function(){let e=new Request("/autocomplete/emojis_for_editor",{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}),t=await fetch(e);if(200!==t.status)throw Error(`emoji request failed with a ${t.status}`);let n=[],i=await t.json();for(let e of Object.keys(i)){let t={text:`${e}:`,render:t=>{let n=document.createElement("img");n.className="emoji emoji-result",n.height=20,n.width=20,n.alt=`:${e}:`,n.src=i[e][0],n.setAttribute("async",""),t.appendChild(n),t.appendChild(document.createTextNode(` ${e}`))},hint:(t,n,o)=>{if(2===i[e].length){let r=o.from||n.from,l={ch:r.ch-1,line:r.line};t.replaceRange(i[e][1],l,o.to||n.to,"complete")}else t.replaceRange(o.text,o.from||n.from,o.to||n.to,"complete")}};n.push(t)}return n});async function c(e){let t=e.getCursor();if(!f(e,t)||p(e,t))try{let t=await s();l().showHint(e,()=>{let n=e.getCursor(),i=e.getTokenAt(n),o=n.ch,r=n.ch,a=n.line,s=i.string;for(;r-- >-1;){let n=e.getTokenAt({ch:r,line:a}).string,i=r-1,c=e.getTokenAt({ch:i,line:a}).string;if(":"===n&&h(c)){let e=t.filter(e=>-1!==e.text.indexOf(s));return{list:e,from:l().Pos(a,r),to:l().Pos(a,o)}}s=n+s}return{list:[],from:l().Pos(a,0),to:l().Pos(a,o)}},{completeSingle:!1})}catch(e){}}function d(e){return 1===e.ch}function u(e,t){let n=m(e,t);return/\s/.test(n)}function h(e){return/\s/.test(e)||""===e}function f(e,t){let n=e.getTokenAt(t);return":"===n.string}function m(e,t){return e.getRange({line:t.line,ch:t.ch-2},{line:t.line,ch:t.ch-1})}function p(e,t){return d(t)||u(e,t)}},66644:(e,t,n)=>{n.d(t,{P:()=>a,p:()=>s});var i=n(4631),o=n.n(i),r=n(53438);let l=/Macintosh/.test(navigator.userAgent)?"Cmd":"Ctrl",a=new WeakMap,s={Enter:e=>{e.execCommand("newlineAndIndentContinueMarkdownList")},Tab:e=>{if(e.somethingSelected()){e.indentSelection("add");return}e.getOption("indentWithTabs")?e.replaceSelection("	","end","+input"):e.execCommand("insertSoftTab")},"Shift-Tab":e=>{e.indentSelection("subtract")},"Cmd-/":"toggleComment","Ctrl-/":"toggleComment",[`${l}-I`]:e=>(0,r.uC)(e,"_"),[`${l}-B`]:e=>(0,r.uC)(e,"**"),[`${l}-E`]:e=>(0,r.uC)(e,"`"),[`${l}-K`]:e=>(0,r.Du)(e),[`Shift-${l}-.`]:e=>(0,r.hD)(e,">"),[`Shift-${l}-7`]:e=>(0,r.hD)(e,"ol"),[`Shift-${l}-8`]:e=>(0,r.hD)(e,"-"),[`Shift-${l}-Alt-V`]:e=>(a.set(e,!0),o().Pass),[`Shift-${l}-V`]:e=>(a.set(e,!0),o().Pass)}},53438:(e,t,n)=>{n.d(t,{Du:()=>c,aU:()=>o,ag:()=>r,hD:()=>s,kb:()=>l,uC:()=>a});var i=n(66644);let o=(e,t,n)=>{l(e)&&n.setAttribute("dir","auto")},r=(e,t)=>{i.P.get(e)||d(e,t),i.P.set(e,!1)};function l(e){let t=e.getMode().name;return"gfm"===t||"markdown"===t||"text/x-markdown"===e.getOption("mode")}function a(e,t){if(!l(e))return;let n=e.getSelection();if(n)e.replaceSelection(t+n+t);else{let n=e.getCursor();e.replaceRange(t.repeat(2),n),e.setCursor({line:n.line,ch:n.ch+t.length})}}function s(e,t){if(!l(e))return;let n=e.getCursor("from"),i=e.getCursor("to"),o=e.getRange({line:n.line,ch:0},i),r=RegExp(`^${"ol"===t?"\\d+\\.":t}\\s`);if(o){let i=o.split("\n"),l=i.every(e=>r.test(e));for(let o=0;o<i.length;o++){let a=n.line+o;if(l){let t=i[o].match(r);t&&e.replaceRange("",{line:a,ch:0},{line:a,ch:t[0].length})}else{let n=`${"ol"===t?`${o+1}.`:t} `;e.replaceRange(n,{line:a,ch:0})}}}else{let i=e.getLine(n.line).match(r);if(i)e.replaceRange("",{line:n.line,ch:0},{line:n.line,ch:i[0].length});else{let i=`${"ol"===t?"1.":t} `;e.replaceRange(i,{line:n.line,ch:0})}}}function c(e){if(!l(e))return;let t=e.getSelection();if(t){let n=e.listSelections();if(e.replaceSelection(`[${t}](url)`),1===n.length&&n[0].from().line===n[0].to().line){let t=n[0],i={line:t.from().line,ch:Math.max(t.from().ch,t.to().ch)};e.setSelection({ch:i.ch+3,line:i.line},{ch:i.ch+6,line:i.line})}}else{let t=e.getCursor();e.replaceRange("[](url)",t),e.setCursor({line:t.line,ch:t.ch+1})}}function d(e,t){if(!l(e))return;let n=e.getSelection(),i=t.clipboardData;if(n&&i){let o=i.getData("text/plain");if(!u(o))return;if(o){let i=e.getCursor();e.replaceSelection(`[${n}](${o})`),e.setCursor({line:i.line,ch:i.ch+o.length+4}),t.preventDefault()}}}function u(e){return/^https?:\/\//i.test(e)}},57958:(e,t,n)=>{n.d(t,{j:()=>v});var i=n(71707),o=n(82936),r=n(68423),l=n(54697);async function a(e){let t=e.getAttribute("data-language-detection-url");if(!t)return;let n=document.querySelector(".js-code-editor");if(!n)return;let i=btoa(encodeURIComponent(e.value)),o=new URL(t,window.location.origin),r=new URLSearchParams(o.search.slice(1));r.append("filename",i),o.search=r.toString();let a=await fetch(o.toString(),{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!a.ok){let e=Error(),t=a.statusText?` ${a.statusText}`:"";throw e.message=`HTTP ${a.status}${t}`,e}let s=await a.json(),c=await (0,l.gD)(n);c.setMode(s.language)}(0,n(254).ZG)(".js-detect-filename-language",e=>{(0,r.oq)(e,a),e.addEventListener("blur",()=>(0,r.iU)(e,a),{once:!0})});var s=n(4631),c=n.n(s),d=n(94313),u=n(58700),h=n(59753),f=n(81574),m=n(36071),p=n(53438),g=n(66644),b=n(56599);let w=class CodeEditor{code(){return this.editor.getValue()}setCode(e){this.editor.setValue(e)}refresh(){this.editor.refresh()}focus(){this.editor.focus()}blur(){this.editor.getInputField().blur()}getDocument(){return this.editor.getDoc()}on(e,t){this.container.addEventListener(e,t)}off(e,t){this.container.removeEventListener(e,t)}setDocument(e){this.editor.swapDoc(e),e.modeOption&&void 0!==e.modeOption.name||this.setMode(e.modeOption)}async loading(e){this.editor.setOption("readOnly",!0),await e(),window.onbeforeunload=null,this.editor.setOption("readOnly",!1)}setMode(e){let t=e;this.mergeMode&&(t={name:"conflict",baseMode:t,editor:this.editor}),"text/x-gfm"===t?this.editor.setOption("mode",{name:"gfm",gitHubSpice:!1}):this.editor.setOption("mode",t);let n=this.container.querySelector(".drag-and-drop");if(n){let e=!("text/x-gfm"===t||"text/x-markdown"===t);n.hidden=e,this.editor.setOption("dragDrop",e)}if(t&&!this.mergeMode){let e=c().findModeByMIME(t);c().autoLoadMode(this.editor,e.mode)}}setConfirmUnloadMessage(e){this.confirmUnload=function(){return e}}clearConfirmUnloadMessage(){this.confirmUnload=void 0,window.onbeforeunload=null}setupFormBindings(){let e=(e,t)=>{this.confirmUnload&&(window.onbeforeunload=this.confirmUnload),(0,u.Se)(this.textarea,this.code()),(0,p.kb)(e)&&(0,b.o)(e),(0,h.f)(this.container,"change",{editor:e,changes:t})};if(this.editor.on("change",e),this.editor.on("swapDoc",e),this.editor.on("renderLine",p.aU),this.editor.on("paste",p.ag),this.confirmUnload){let e=this.textarea.closest("form");if(null==e)return;e.addEventListener("submit",()=>{window.onbeforeunload=null})}}setupControlBindings(){let e=this.container.querySelector(".js-code-indent-width"),t=this.container.querySelector(".js-code-wrap-mode"),n=this.container.querySelector(".js-code-indent-mode");this.editor.setOption("tabSize",parseInt(e.value)),this.editor.setOption("indentUnit",parseInt(e.value)),this.editor.setOption("lineWrapping","on"===t.value),this.editor.setOption("indentWithTabs","space"!==n.value),e.addEventListener("change",()=>{this.editor.setOption("tabSize",parseInt(e.value)),this.editor.setOption("indentUnit",parseInt(e.value))}),t.addEventListener("change",()=>{this.editor.setOption("lineWrapping",null!=t&&"on"===t.value)}),n.addEventListener("change",()=>{this.editor.setOption("indentWithTabs","space"!==n.value)})}setupKeyBindings(){this.editor.addKeyMap(g.p),this.editor.addKeyMap({"Shift-Cmd-P":()=>{this.blur(),(0,h.f)(this.textarea,"codeEditor:preview")}}),(0,d.Ty)()||delete c().keyMap.default["Alt-G"]}setupScrollOnHashChange(){(0,f.Z)(()=>{let e=v(window.location.hash);e.length>0&&(this.focus(),this.editor.setCursor({line:e[0]-1,ch:0},{scroll:!0}))})}markText(e,t,n){return this.editor.markText(e,t,{className:n})}constructor(e){if(this.container=e,!this.container)return;this.container.setAttribute("data-editor-loaded",""),this.textarea=this.container.querySelector(".js-code-textarea"),this.filename=this.textarea.getAttribute("data-filename")||"";let t=this.textarea.value,n=this.textarea.getAttribute("data-codemirror-mode"),i="true"===this.textarea.getAttribute("data-codemirror-fixed-height");this.mergeMode="true"===this.textarea.getAttribute("data-merge-mode");let o=this.textarea.clientHeight;this.textarea.style.display="none";let r={lineNumbers:!0,value:t,inputStyle:"contenteditable",theme:"github-light"};this.mergeMode&&(r.gutters=["CodeMirror-linenumbers","merge-gutter"]);let l=this.textarea.parentElement;this.editor=c()(l,r);let a=this.textarea.getAttribute("data-hotkey-scope-id")||"code-editor";if(this.editor.getInputField().setAttribute("id",a),0!==o&&i){let e=this.container.querySelector(".CodeMirror");e&&(e.style.height=`${o}px`)}this.setMode(n),this.setupKeyBindings(),this.setupFormBindings(),this.setupControlBindings(),this.setupScrollOnHashChange()}};function E(e){if((0,l.Pi)(e)||e.hasAttribute("data-editor-loaded")||e.classList.contains("js-mobile-code-editor"))return;let t=new w(e),n=e.getAttribute("data-github-confirm-unload")||"";("yes"===n||"true"===n)&&(n=""),"no"===n||"false"===n||t.setConfirmUnloadMessage(n),(0,h.f)(e,"codeEditor:ready",{editor:t})}function v(e){let t,n;let i=e.match(/#?(?:L|-)(\d+)/gi);if(!i)return[];{let e=[];for(t=0,n=i.length;t<n;t++){let n=i[t];e.push(parseInt(n.replace(/\D/g,"")))}return e}}(0,m.N7)(".js-code-editor",{constructor:HTMLElement,add:E})},254:(e,t,n)=>{n.d(t,{ZG:()=>a,q6:()=>c,w4:()=>s});var i=n(8439);let o=!1,r=new i.Z;function l(e){let t=e.target;if(t instanceof HTMLElement&&t.nodeType!==Node.DOCUMENT_NODE)for(let e of r.matches(t))e.data.call(null,t)}function a(e,t){o||(o=!0,document.addEventListener("focus",l,!0)),r.add(e,t),document.activeElement instanceof HTMLElement&&document.activeElement.matches(e)&&t(document.activeElement)}function s(e,t,n){function i(t){let o=t.currentTarget;o&&(o.removeEventListener(e,n),o.removeEventListener("blur",i))}a(t,function(t){t.addEventListener(e,n),t.addEventListener("blur",i)})}function c(e,t){function n(e){let{currentTarget:i}=e;i&&(i.removeEventListener("input",t),i.removeEventListener("blur",n))}a(e,function(e){e.addEventListener("input",t),e.addEventListener("blur",n)})}},68423:(e,t,n)=>{n.d(t,{dY:()=>d,iU:()=>c,oq:()=>s});let i=new WeakMap;function o(e){let t=i.get(e);t&&(null!=t.timer&&clearTimeout(t.timer),t.timer=window.setTimeout(()=>{null!=t.timer&&(t.timer=null),t.inputed=!1,t.listener.call(null,e)},t.wait))}function r(e){let t=e.currentTarget,n=i.get(t);n&&(n.keypressed=!0,null!=n.timer&&clearTimeout(n.timer))}function l(e){let t=e.currentTarget,n=i.get(t);n&&(n.keypressed=!1,n.inputed&&o(t))}function a(e){let t=e.currentTarget,n=i.get(t);n&&(n.inputed=!0,n.keypressed||o(t))}function s(e,t,n={wait:null}){i.set(e,{keypressed:!1,inputed:!1,timer:void 0,listener:t,wait:null!=n.wait?n.wait:100}),e.addEventListener("keydown",r),e.addEventListener("keyup",l),e.addEventListener("input",a)}function c(e,t){e.removeEventListener("keydown",r),e.removeEventListener("keyup",l),e.removeEventListener("input",a);let n=i.get(e);n&&(null!=n.timer&&n.listener===t&&clearTimeout(n.timer),i.delete(e))}function d(e){let t=i.get(e);t&&t.listener.call(null,e)}},58700:(e,t,n)=>{n.d(t,{Bt:()=>r,DN:()=>s,KL:()=>u,Se:()=>a,qC:()=>h,sw:()=>c});var i=n(5582);function o(e,t,n){return e.dispatchEvent(new CustomEvent(t,{bubbles:!0,cancelable:n}))}function r(e,t){t&&(l(e,t),(0,i.j)(t)),o(e,"submit",!0)&&e.submit()}function l(e,t){if(!(e instanceof HTMLFormElement))throw TypeError("The specified element is not of type HTMLFormElement.");if(!(t instanceof HTMLElement))throw TypeError("The specified element is not of type HTMLElement.");if("submit"!==t.type)throw TypeError("The specified element is not a submit button.");if(!e||e!==t.form)throw Error("The specified element is not owned by the form element.")}function a(e,t){if("boolean"==typeof t){if(e instanceof HTMLInputElement)e.checked=t;else throw TypeError("only checkboxes can be set to boolean value")}else{if("checkbox"===e.type)throw TypeError("checkbox can't be set to string value");e.value=t}o(e,"change",!1)}function s(e,t){for(let n in t){let i=t[n],o=e.elements.namedItem(n);o instanceof HTMLInputElement?o.value=i:o instanceof HTMLTextAreaElement&&(o.value=i)}}function c(e){if(!(e instanceof HTMLElement))return!1;let t=e.nodeName.toLowerCase(),n=(e.getAttribute("type")||"").toLowerCase();return"select"===t||"textarea"===t||"input"===t&&"submit"!==n&&"reset"!==n||e.isContentEditable}function d(e){return new URLSearchParams(e)}function u(e,t){let n=new URLSearchParams(e.search),i=d(t);for(let[e,t]of i)n.append(e,t);return n.toString()}function h(e){return d(new FormData(e)).toString()}},5582:(e,t,n)=>{function i(e){let t=e.closest("form");if(!(t instanceof HTMLFormElement))return;let n=o(t);if(e.name){let i=e.matches("input[type=submit]")?"Submit":"",o=e.value||i;n||((n=document.createElement("input")).type="hidden",n.classList.add("js-submit-button-value"),t.prepend(n)),n.name=e.name,n.value=o}else n&&n.remove()}function o(e){let t=e.querySelector("input.js-submit-button-value");return t instanceof HTMLInputElement?t:null}n.d(t,{j:()=>i,u:()=>o})}}]);
//# sourceMappingURL=app_assets_modules_github_editor_code-editor_ts-3750bde08713.js.map